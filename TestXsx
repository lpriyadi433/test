-- ðŸŒ€ Movement Menu dengan UI mirip xsx Lib (versi rapih)
-- Sudah diperbaiki: ukuran kecil, font kecil, drag hanya di Title

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- Vars
local WalkSpeedEnabled = false
local CustomWalkSpeed = 16
local FlyEnabled = false
local FlySpeed = 100
local BodyGyro, BodyVelocity, FlyConn

-- GUI Root
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "xsxMovementMenu"
ScreenGui.ResetOnSpawn = false
if gethui then
    ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
    ScreenGui.Parent = game.CoreGui
else
    ScreenGui.Parent = Player:WaitForChild("PlayerGui")
end

-- Main Window
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 450, 0, 260) -- lebih kecil
Main.Position = UDim2.new(0.3,0,0.3,0)
Main.BackgroundColor3 = Color3.fromRGB(20,20,20)
Main.BorderSizePixel = 0
Instance.new("UICorner", Main).CornerRadius = UDim.new(0,8)

-- Title (draggable)
local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, -90, 0, 35)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "âš¡ xsx Movement Menu"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Active = true
Title.Draggable = true

-- Tombol Minimize
local MinBtn = Instance.new("TextButton", Main)
MinBtn.Size = UDim2.new(0,30,0,25)
MinBtn.Position = UDim2.new(1,-70,0,5)
MinBtn.BackgroundColor3 = Color3.fromRGB(80,80,80)
MinBtn.Text = "â€”"
MinBtn.TextColor3 = Color3.fromRGB(255,255,255)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 16
Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(0,6)

-- Tombol Close
local CloseBtn = Instance.new("TextButton", Main)
CloseBtn.Size = UDim2.new(0,30,0,25)
CloseBtn.Position = UDim2.new(1,-35,0,5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255,255,255)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 16
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0,6)

CloseBtn.MouseButton1Click:Connect(function()
    WalkSpeedEnabled = false
    Humanoid.WalkSpeed = 16
    if FlyEnabled then
        FlyEnabled = false
        if FlyConn then FlyConn:Disconnect() end
        if BodyVelocity then BodyVelocity:Destroy() end
        if BodyGyro then BodyGyro:Destroy() end
        Humanoid.PlatformStand = false
    end
    ScreenGui:Destroy()
end)

-- Sidebar Tab
local TabBar = Instance.new("Frame", Main)
TabBar.Size = UDim2.new(0,110,1, -40)
TabBar.Position = UDim2.new(0,0,0,40)
TabBar.BackgroundColor3 = Color3.fromRGB(15,15,15)
Instance.new("UICorner", TabBar).CornerRadius = UDim.new(0,6)

local TabLayout = Instance.new("UIListLayout", TabBar)
TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
TabLayout.Padding = UDim.new(0,5)

-- Pages container
local Pages = Instance.new("Frame", Main)
Pages.Size = UDim2.new(1, -120,1, -40)
Pages.Position = UDim2.new(0,120,0,40)
Pages.BackgroundTransparency = 1

-- Fungsi buat tab button
local function CreateTab(name)
    local Btn = Instance.new("TextButton", TabBar)
    Btn.Size = UDim2.new(1,-10,0,30)
    Btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    Btn.Text = name
    Btn.Font = Enum.Font.GothamBold
    Btn.TextSize = 16
    Btn.TextColor3 = Color3.fromRGB(255,255,255)
    Btn.AutoButtonColor = true
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,6)

    local Page = Instance.new("Frame", Pages)
    Page.Size = UDim2.new(1,0,1,0)
    Page.BackgroundTransparency = 1
    Page.Visible = false

    Btn.MouseButton1Click:Connect(function()
        for _,p in pairs(Pages:GetChildren()) do
            if p:IsA("Frame") then p.Visible = false end
        end
        for _,b in pairs(TabBar:GetChildren()) do
            if b:IsA("TextButton") then
                b.BackgroundColor3 = Color3.fromRGB(40,40,40)
            end
        end
        Btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
        Page.Visible = true
    end)

    return Page
end

-- Buat tab
local MovementPage = CreateTab("Movement")
local VisualPage = CreateTab("Visual")
local MiscPage = CreateTab("Misc")
MovementPage.Visible = true

-- Layout di Movement Page
local Layout = Instance.new("UIListLayout", MovementPage)
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.Padding = UDim.new(0,10)

-- WalkSpeed Label + Slider
local WalkLabel = Instance.new("TextLabel", MovementPage)
WalkLabel.Size = UDim2.new(1,0,0,25)
WalkLabel.BackgroundTransparency = 1
WalkLabel.Text = "WalkSpeed"
WalkLabel.Font = Enum.Font.GothamBold
WalkLabel.TextSize = 16
WalkLabel.TextColor3 = Color3.fromRGB(255,255,255)
WalkLabel.TextXAlignment = Enum.TextXAlignment.Left

local WalkSlider = Instance.new("Frame", MovementPage)
WalkSlider.Size = UDim2.new(1,0,0,20)
WalkSlider.BackgroundColor3 = Color3.fromRGB(60,60,60)
Instance.new("UICorner", WalkSlider).CornerRadius = UDim.new(0,6)

local WalkFill = Instance.new("Frame", WalkSlider)
WalkFill.Size = UDim2.new(CustomWalkSpeed/200,0,1,0)
WalkFill.BackgroundColor3 = Color3.fromRGB(0,170,255)
Instance.new("UICorner", WalkFill).CornerRadius = UDim.new(0,6)

local WalkValue = Instance.new("TextLabel", WalkSlider)
WalkValue.Size = UDim2.new(0,40,1,0)
WalkValue.Position = UDim2.new(1,-45,0,0)
WalkValue.BackgroundTransparency = 1
WalkValue.Text = tostring(CustomWalkSpeed)
WalkValue.Font = Enum.Font.GothamBold
WalkValue.TextSize = 16
WalkValue.TextColor3 = Color3.fromRGB(255,255,255)

-- FlySpeed Label + Sl
